@page "/giris"
@model OdiAdmin.Pages.Account.LoginModel
@{
    Layout = "";
}
<!DOCTYPE html>
<html lang="tr">
<head>
	<meta charset="UTF-8">
	<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=0'>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="Description" content="">
	<meta name="Author" content="Tasarım Balonu">
	<!-- Title -->
	<title> ODI App Yönetim Paneli </title>

	<!-- Favicon -->
	<link rel="icon" href="~/img/brand/favicon.png" type="image/x-icon">

	<!-- Bootstrap css -->
	<link href="~/plugins/bootstrap/css/bootstrap.css" rel="stylesheet" id="style">

	<!-- Style css -->
	<link href="~/css/style.css" rel="stylesheet">
	<link href="~/css/plugins.css" rel="stylesheet">

	<!-- Animations css -->
	<link href="~/css/animate.css" rel="stylesheet">
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular-animate.js"></script>
</head>
<body id="body" ng-app="myApp" ng-controller="myCtrl">
	<!-- Loader -->
	<div id="global-loader">
		<img src="~/img/loaders/loader-4.svg" class="loader-img" alt="Loader">
	</div>
	<!-- /Loader -->

	<div class="square-box">
		<div></div>
		<div></div>
		<div></div>
		<div></div>
		<div></div>
		<div></div>
		<div></div>
		<div></div>
		<div></div>
		<div></div>
		<div></div>
		<div></div>
		<div></div>
		<div></div>
		<div></div>
	</div>

	<!-- page -->
	<div class="page login-img">

		<!-- main-signin-wrapper -->
		<div class="">
			<div class="my-auto page page-h">
				<div class="main-signin-wrapper">
					<div class="col-xl-3 col-lg-4 col-md-5 col-sm-8">
						<div class="text-center mb-3"> <h3 class="text-white"> ODI APP Yönetim Paneli</h3> </div>
						<div class="card">
							<div class="card-body p-5">
								<div class="main-signin-header">
									<div class="">
										<h2>Yönetici Girişi</h2>
										<h4 class="text-start">Kullanıcı bilgilerinizi giriniz</h4>
										<form method="POST" data-ajax="true" data-ajax-method="post" data-ajax-loading="#spinner" data-ajax-complete="completed">

											<div class="form-group text-start">
												<label>Telefon Numarası</label>
												<input class="form-control" asp-for="signInInput.Telefon" id="phoneMask" placeholder="()" type="text">
											</div>
											<div class="form-group text-start">
												<label>Şifre</label>
												<input class="form-control" placeholder="Şifre" asp-for="signInInput.Sifre" type="password">
											</div>


											<div class="alert alert-solid-danger text-start" ng-repeat="err in errlist" ng-animate="'animate'">
													<button aria-label="Close" class="btn-close" data-bs-dismiss="alert" type="button">
														<span aria-hidden="true">×</span>
													</button>
													{{ err }}

												</div>
											<div class="alert alert-solid-success text-start" ng-if="successMessage" ng-animate="'animate'">
												<button aria-label="Close" class="btn-close" data-bs-dismiss="alert" type="button">
													<span aria-hidden="true">×</span>
												</button>
												{{ successMessage }}

											</div>

											<button type="submit" class="btn ripple btn-primary btn-block">Giriş <div id="spinner" class="spinner-border spinner-border-sm text-secondary " style="display:none;" role="status"> <span class="visually-hidden">Loading...</span> </div> </button>

											<div></div>
										</form>
									</div>
								</div>

							</div>
						</div>

					</div>

				</div>
			</div>

		</div>
	</div>
	<!-- page closed -->
	<!-- /main-signin-wrapper -->
	<!-- JQuery min js -->
	<script src="~/plugins/jquery/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-ajax-unobtrusive/3.2.6/jquery.unobtrusive-ajax.min.js" integrity="sha512-DedNBWPF0hLGUPNbCYfj8qjlEnNE92Fqn7xd3Sscfu7ipy7Zu33unHdugqRD3c4Vj7/yLv+slqZhMls/4Oc7Zg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<!-- Bootstrap Bundle js -->
	<script src="~/plugins/bootstrap/popper.min.js"></script>
	<script src="~/plugins/bootstrap/js/bootstrap.min.js"></script>


	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-toaster/5.1.0/js/bootstrap-toaster.min.js" integrity="sha512-LKHDVlxKQ+ChADdnDsXJYU7LaUdGJk1X+Ab2rbFU11cqm+vhp2PGOWQIrl6K1NRZxHAdwPOYLPINPvUIEyBtVQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<!--- Internal jquery.maskedinput js -->
	<script src="~/plugins/jquery.maskedinput/jquery.maskedinput.js"></script>

	<!-- Custom js -->
	<script src="~/js/custom.js"></script>
	<script type="text/javascript">
		$(document).ready(function () {
			$('#phoneMask').mask('0(999) 999 9999');
		});

		function completed(xhr) {
			console.log(xhr.responseText);
			var res = JSON.parse(xhr.responseText)
		
			if (res.Sonuc == false) {
				var errorList = JSON.parse(res.Mesaj);
				angular.element(document.getElementById('body')).scope().errorListFunc(errorList);
			}
			else {
				console.log(res.Mesaj);
				angular.element(document.getElementById('body')).scope().successFunc(res.Mesaj);
				window.location.replace("/");
			}
		}

		/// Angular alanı
		var app = angular.module('myApp', ['ngAnimate']);
		app.controller('myCtrl', function ($scope) {
			var parent = $scope;

			//tanımlamalar
			$scope.errlist = []
			$scope.successMessage = "";


			//fonksiyonlar
			$scope.errorListFunc = function (erList) {
				console.log(erList)
				$scope.errlist = [];
				$scope.$apply();
				$scope.errlist = erList;
				$scope.$apply();
			};
			$scope.successFunc = function (mesaj) { 
				console.log(mesaj)
				$scope.successMessage = mesaj;
				$scope.$apply();
			}

		});
	</script>
</body>
</html>